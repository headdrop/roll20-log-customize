<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>핸드아웃 변환기</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="ho2image.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.2/FileSaver.min.js"></script>

  </head>
  <body>
    
    <div class="menu">
      <label for="편도용사"><p>편도용사</p>퀘스트카드</label>
      <label for="amade-h"><p>아마데우스</p>본체카드</label>
      <label for="amade-t"><p>아마데우스</p>위협카드</label>
    </div>
    
    <input type="radio" name="tabmenu" id="편도용사" num="1" value="편도용사_퀘스트 카드" checked >
    <div class="tabCon">
      <div class="content">
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
      </div>
    </div>

    <input type="radio" name="tabmenu" id="amade-h" num="2" value="아마데우스_본체카드">
    <div class="tabCon">
      <div class="content">
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox desc" contenteditable></div>
      </div>
    </div>

    <input type="radio" name="tabmenu" id="amade-t" num="3" value="아마데우스_위협카드">
    <div class="tabCon">
      <div class="content">
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable>공격</div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox" contenteditable></div>
        <div class="inputbox desc" contenteditable></div>
      </div>
    </div>
    


    <div class="bottom"><button id="down">다운로드</button></div>
    

    
    <script>
      document.getElementsByClassName("desc")[1].addEventListener("blur",function(){
        this.innerHTML = this.innerHTML.replace(/(【.+?】)(?!<)/gi,'<span class="bold">$1</span>');
        this.querySelectorAll("span").forEach(element => {
          var intxt = element.innerText;
          if(intxt.includes("【") && intxt.includes("】")===false) {
            element.after(intxt);
            element.remove();
          }

          });
        });
      
    document.getElementById("down").onclick = function(){
      var target = document.querySelector('input[name="tabmenu"]:checked+.tabCon .content');
      var fileName = document.querySelector('input[name="tabmenu"]:checked').value;
      domtoimage.toBlob(target)
      .then(function (blob) {
          window.saveAs(blob, fileName+'.png');
      });
      }
    </script>
  </body>



</html>